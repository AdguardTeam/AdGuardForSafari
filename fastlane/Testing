# SPDX-FileCopyrightText: AdGuard Software Limited
#
# SPDX-License-Identifier: GPL-3.0-or-later

# frozen_string_literal: true

desc 'Run AdguardMiniTests tests'
lane :test do |options|
  run_test('AdguardMiniTests')
end

def run_test(scheme, _custom_number = nil)
  run_tests(
    step_name: "Run #{scheme}",
    project: @project_file,
    scheme: scheme,
    parallel_testing: false,
    clean: true,
    output_directory: "#{@root_build_path}/test-reports",
    output_types: 'junit',
    output_files: "#{scheme}.junit",
    derived_data_path: "#{@build_path}/#{scheme}",
    xcargs: '-skipPackagePluginValidation'
  )
end
