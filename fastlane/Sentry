# SPDX-FileCopyrightText: AdGuard Software Limited
#
# SPDX-License-Identifier: GPL-3.0-or-later

# frozen_string_literal: true

require_relative 'Config'

desc 'Uploading of a build symbols to Sentry server'
desc 'Options:'
desc '  - auth_token (required): STRING Token for upload Sentry debug symbols'
desc Config::CONFIG_OPTION_DOC
lane :to_sentry do |options|
  product_name = @build_settings['AG_PRODUCT_NAME']
  archive_path = "#{@build_path}/#{product_name}.xcarchive"

  upload_to_sentry(
    project_slug: 'adguard-mac-mini',
    archive_path: archive_path,
    product_name: product_name
  )
end
